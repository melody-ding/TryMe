export default class ScratchBuffer {
  constructor(wasm) {
    this.wasm = wasm
    this.ptr = null
    this.len = 0
  }

  clear() {
    this.len = 0
  }

  free() {
    if (this.ptr !== null) {
      this.wasm._free(this.ptr)
      this.len = 0
      this.ptr = null
    }
  }

  resize(len) {
    if (this.ptr !== null) this.free()
    this.len = len
    this.ptr = this.wasm._malloc(len)
  }

  ensureSize(len) {
    if (this.ptr === null || this.len < len) {
      this.resize(len)
    }
  }
}
